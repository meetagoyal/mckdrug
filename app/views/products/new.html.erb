<h1 class="display-4 p-2">Add Products</h1>

<% if @categories %>
<div class="row">
    <div class="col-4">
      <%= form_with(url: select_category_products_path, local: true, method: :post) do |form| %>

        <div class="form-group">
          <%= form.label :category_id %>
          <%= form.collection_select(:category_id, @categories, :id, :name, {}, {class: 'form-control'}) %>
        </div>

        <div class="form-group">
          <%= form.submit 'Select Category', class: 'btn btn-outline-primary' %>
        </div>
      <% end %>
    </div>
    <div class="col-8"></div>
  </div>

<% elsif @subcategories  %>
<div class="row">
    <div class="col-4">
      <%= form_with(url: select_subcategory_products_path, local: true, method: :post) do |form| %>

        <%= form.hidden_field(:category_id, value: @category.id) %>

        <div class="form-group">
          <%= form.label :subcategory_id %>
          <%= form.collection_select(:subcategory_id, @subcategories, :id, :name, {}, {class: 'form-control'}) %>
        </div>

        <div class="form-group">
          <%= form.submit 'Select Sub Category', class: 'btn btn-outline-primary' %>
        </div>
      <% end %>
    </div>
    <div class="col-8"></div>
  </div>
  
  <% elsif @product %>
  
<div class="row">
  <div class="col-4">
    <%= form_with(model: @product, local: true) do |form| %>

      <%= render 'errors', object: @product %>

        <%= form.hidden_field(:category_id, value: @category.id) %>
        <%= form.hidden_field(:subcategory_id, value: @subcategory.id) %>

      <div class="form-group">
        <%= form.label :name %>
        <%= form.text_field :name, id: :product_name, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :price %>
        <%= form.text_field :price, id: :product_price, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :packsize %>
        <%= form.text_field :packsize, id: :product_packsize, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :quantity %>
        <%= form.text_field :quantity, id: :product_quantity, class: 'form-control' %>
      </div>
      
      <div class="form-group">
        <%= form.label :photo %>
        <%= form.text_field :photo, id: :product_photo, class: 'form-control' %>
      </div>
      

      <div class="form-group">
        <%= form.submit class: 'btn btn-outline-primary' %>
      </div>
    <% end %>
  </div>
  <div class="col-8"></div>
</div>

<% end %>